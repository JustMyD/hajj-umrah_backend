# Генератор мок-данных

Скрипт `mock_data_generator.py` используется для генерации тестовых данных в миграциях Alembic.

## Использование

### 1. Данные уже заполнены

Все списки в `mock_data_generator.py` уже заполнены тестовыми данными для агрегатора паломнических туров:
- **15 названий туроператоров** (Аль-Хадж Тур, Медина Тревел, и т.д.)
- **10 описаний туроператоров**
- **20 логотипов** (logo_1.png - logo_20.png) - каждый оператор получает уникальный логотип
- **8 специализаций** (Хадж, Умра, VIP туры, и т.д.)
- **12 особенностей** (Опытные гиды-мутавифы, Трансфер, Питание, и т.д.)
- **5 сертификатов**
- **15 названий туров**
- **5 локаций**
- **15 отелей в Мекке** и **15 отелей в Медине**
- **20 удобств отелей**
- **15 аэропортов** с IATA кодами и городами
- **10 включений в перелет**

При необходимости вы можете изменить или дополнить эти данные в файле `mock_data_generator.py`.

**Важно:** 
- `AIRPORT_CITIES` должен соответствовать `AIRPORT_IATA_CODES` по индексу (одинаковое количество элементов)
- Для массивов (specialisations, features, certificates, amenities, inclusions) скрипт автоматически выбирает случайное количество элементов из списка

### 2. Параметры генерации (фиксированные)

Логика генерации настроена следующим образом:
- **Количество туров на оператора**: 3-5 (случайно)
- **Отелей на тур**: всегда 2 (один в Мекке, один в Медине)
- **Вылетов**: 4-5 в месяц с декабря 2025 до июля 2026 (для каждого тура)
- **Пересадок**: 0 или 1 на каждое направление (outbound/inbound, случайно)

В миграции можно настроить только количество операторов:

```python
mock_data = generate_mock_data(num_operators=5)
```

### 3. Запустите миграцию

```bash
alembic upgrade head
```

## Структура данных

Скрипт генерирует данные для всех таблиц в правильном порядке:

1. **operators** - туроператоры
2. **tours** - туры (связаны с operators)
3. **hotels** - отели (связаны с tours)
4. **flights** - вылеты (связаны с tours, UUID)
5. **flight_directions** - направления перелетов (outbound/inbound для каждого flight)
6. **flight_layovers** - узлы перелетов (пересадки и конечные точки для каждого направления)

## Логика генерации

- **Даты вылетов**: генерируются случайно в диапазоне от текущей даты до +30 дней
- **Цены**: случайные значения в разумных диапазонах
- **Рейтинги и отзывы**: генерируются случайно, иногда могут быть None
- **UUID**: генерируются автоматически для flights
- **Связи**: автоматически устанавливаются правильные foreign keys

## Удаление данных

Для удаления всех мок-данных используйте:

```bash
alembic downgrade -1
```

Или вручную через SQL:

```sql
DELETE FROM flight_layovers;
DELETE FROM flight_directions;
DELETE FROM flights;
DELETE FROM hotels;
DELETE FROM tours;
DELETE FROM operators;
```
